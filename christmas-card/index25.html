<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Christmas Card</title>

<style>
:root { --card-w: 320px; --card-h: 460px; }
html,body { height:100%; }

body{
  margin:0;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Segoe UI',sans-serif;
  overflow:hidden;

  height: 100%; 
  margin: 0;
  background-image: url("bg.png");
  background-size: cover;        /* ‡∏¢‡∏∑‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏î‡∏¢‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô */
  background-position: center;   /* ‡∏à‡∏±‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏†‡∏≤‡∏û */
  background-repeat: no-repeat;
  background-color: #0b1d2a;     /* ‡∏™‡∏µ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ñ‡πâ‡∏≤‡∏£‡∏π‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏ä‡πâ‡∏≤/‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ */

}


.bg-blur {
  position: fixed; inset: 0; z-index: -1;
  background-image: url("bg.png");
  background-size: cover;
  filter: blur(8px);
  opacity: 0.7;
}

/* MUSIC LIGHT */
.music-light{
  position:fixed;
  inset:-20px;
  background:
    radial-gradient(circle at 50% 60%,
      rgba(255,220,160,.5),
      transparent 70%);
  filter:blur(80px);
  opacity:.25;
  transition:opacity .12s;
  z-index:-5;
  pointer-events:none;
}

.hint{
  position:absolute;
  top:14px;
  font-size:12px;
  color:#cfe8ff;
  opacity:.8;
}

/* CARD */
.scene{ perspective:1200px; }
.card{
  width:var(--card-w);
  height:var(--card-h);
  position:relative;
  transform-style:preserve-3d;
  transition:transform 1s cubic-bezier(.2,.8,.2,1);
  cursor:pointer;
}
.card.is-flipped{ transform:rotateY(180deg); }

.side{
  position:absolute;
  inset:0;
  backface-visibility:hidden;
  border-radius:22px;
  padding:24px;
  text-align:center;
  background:#fff;
  box-shadow:0 20px 50px rgba(0,0,0,.35);
}

.back{
  transform:rotateY(180deg);
  background:linear-gradient(#fff,#f7fbff);
}

/* FRONT */
.tree{ font-size:86px; margin-top:30px; }
.front h1{ color:#c1121f; }

/* BACK */
.msg{
  font-size:15px;
  line-height:1.7;
  min-height:120px;
  white-space:pre-wrap;
}

.controls{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-top:14px;
}
button{
  border:none;
  padding:8px 14px;
  border-radius:999px;
  background:#1d3557;
  color:#fff;
  cursor:pointer;
}
button.secondary{ background:#457b9d; }

/* SNOW */
.snow{
  position:fixed;
  top:-10px;
  width:6px;
  height:6px;
  background:white;
  border-radius:50%;
  opacity:.8;
  filter:blur(.5px);
  pointer-events:none;
  z-index:50;
  animation:fall linear forwards;
}

@keyframes fall{
  to{
    transform:translateY(110vh) translateX(40px);
  }
}

/* MUSIC NOTE */
.music-note{
  position:absolute;
  bottom:-20px;
  font-size:18px;
  color:rgba(255,235,200,.6);
  animation:floatUp linear infinite;
}
@keyframes floatUp{
  0%{opacity:0}
  20%{opacity:.6}
  100%{transform:translateY(-520px);opacity:0}
}

.music-note{
  position:absolute;
  bottom:-30px;
  font-size:20px;
  color:rgba(255,230,180,.85);
  text-shadow:
    0 0 8px rgba(255,200,140,.8),
    0 0 16px rgba(255,180,120,.6);
  animation:floatUp linear infinite;
  pointer-events:none;
}

.hero {
  height: 100vh;
  background: url("images/bg.png") center/cover no-repeat;
}

</style>
</head>

<body style="background:url('bg.png') center/cover no-repeat; background-color:#0b1d2a;">
<div class="bg-blur"></div>
<div class="music-light" id="musicLight"></div>
<div class="hint">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î üéÅ</div>

<div class="scene">
  <div class="card" id="card">
    <div class="side front">
      <div class="tree">üéÑ</div>
      <h1>Merry Christmas</h1>
      <p>‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î</p>
    </div>

    <div class="side back">
      <h2>‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© üéÖ</h2>
      <div class="msg" id="msg"></div>
      <div class="controls">
        <button id="retype">‡∏°‡∏µ‡∏≠‡∏µ‡∏Å‡∏Å ‚ù§Ô∏è</button>
        <button class="secondary" id="party">‡πÇ‡∏õ‡∏£‡∏¢‡∏´‡∏¥‡∏°‡∏∞ üéâ</button>
      </div>
      <p style="font-size:13px;color:#777">‚Äî From Meeeee ‚ù§Ô∏è</p>
    </div>
  </div>
</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_8a2f0b2c9e.mp3">
</audio>

<script>
const card = document.getElementById('card');
const msgEl = document.getElementById('msg');
const music = document.getElementById('music');
const musicLight = document.getElementById('musicLight');

const messages = [
`‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏¥‡∏™‡∏°‡∏≤‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ü‡∏ô ‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç ‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏° ‡πÅ‡∏•‡∏∞‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏à‡πÄ‡∏ï‡πá‡∏°‡∏•‡πâ‡∏≤‡∏ô‡∏ô‡πâ‡∏≤‡∏≤
‡∏£‡∏±‡∏Å‡πÅ‡∏ü‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏¥‡∏™‡∏°‡∏≤‡∏™‡∏ï‡πå ‡πÅ‡∏•‡∏∞‡∏ó‡∏∏‡∏Å‡πÜ‡πÄ‡∏ó‡∏®‡∏Å‡∏≤‡∏•‡∏ô‡∏∞‡∏Ñ‡πâ‡∏≤‡∏ö ‚ú®
‡∏£‡∏±‡∏Å‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏ô‡∏µ‡πâ üéÅ`,

`‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏¥‡∏™‡∏°‡∏≤‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ü‡∏ô‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç ‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏° ‡πÅ‡∏•‡∏∞‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏à‡πÄ‡∏ï‡πá‡∏°‡∏•‡πâ‡∏≤‡∏ô‡∏ô‡πâ‡∏≤‡∏≤
‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ü‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÜ ‡∏ß‡∏±‡∏ô‡∏ô‡∏∞‡∏Ñ‡πâ‡∏≤‡∏ö ‚ú®
‡∏£‡∏±‡∏Å‡∏ô‡∏∞ ‡∏£‡∏±‡∏Å‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢‡∏¢ üéÅ`,

`‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå‡∏°‡∏≤‡∏™‡∏ô‡∏µ‡πâ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ü‡∏ô ‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å ‡πÜ
‡∏°‡∏µ‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏°‡πÉ‡∏´‡πâ‡∏¢‡∏¥‡πâ‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ü‡∏ô‡∏¢‡∏¥‡πâ‡∏°‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏π‡πÄ‡∏•‡∏¢‡∏ô‡∏∞ ‚ò∫Ô∏è
‡∏£‡∏±‡∏Å‡πÅ‡∏ü‡∏ô‡∏°‡∏≤‡∏Å ‡πÜ ‡πÄ‡∏•‡∏¢‡∏¢‡∏¢ üéÑ‚ù§Ô∏è`,

`‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå‡∏°‡∏≤‡∏™‡∏õ‡∏µ‡∏ô‡∏µ‡πâ ‡∏´‡∏ô‡∏π‡∏Ç‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡πÉ‡∏´‡πâ‡πÅ‡∏ü‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°‡∏ô‡∏∞ üéÅ
‡∏Ç‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á ‡πÜ ‡πÉ‡∏´‡πâ‡πÅ‡∏ü‡∏ô‡∏¢‡∏¥‡πâ‡∏° ‡πÉ‡∏´‡πâ‡πÅ‡∏ü‡∏ô‡∏≠‡∏∏‡πà‡∏ô‡πÉ‡∏à ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏ô‡∏≤‡∏ô ‡πÜ ‡πÄ‡∏•‡∏¢ üíï
‡∏£‡∏±‡∏Å‡πÅ‡∏ü‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞ üéÑ‚ú®`,

`‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡πÅ‡∏ü‡∏ô ‡∏î‡∏±‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå‡∏°‡∏≤‡∏™ üé∂
‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ü‡∏ô ‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏°‡∏µ‡∏´‡∏ô‡∏π‡∏Å‡∏≠‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏¢ ü§ç
‡∏£‡∏±‡∏Å‡∏ô‡∏∞ ‡∏£‡∏±‡∏Å‡∏°‡∏≤‡∏Å ‡πÜ ‡πÄ‡∏•‡∏¢‡∏¢ üéÑ`,

`‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå‡∏°‡∏≤‡∏™‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏Ç‡∏≠‡∏≠‡∏∞‡πÑ‡∏£‡∏°‡∏≤‡∏Å
‡∏Ç‡∏≠‡πÅ‡∏Ñ‡πà‡πÉ‡∏´‡πâ‡πÅ‡∏ü‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç ‡πÅ‡∏•‡∏∞‡∏¢‡∏¥‡πâ‡∏°‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏Å‡πá‡∏û‡∏≠‡πÅ‡∏•‡πâ‡∏ß üòä
‡∏´‡∏ô‡∏π‡∏à‡∏∞‡∏Ñ‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏•‡∏¢‡∏ô‡∏∞ üéÑ‚ù§Ô∏è`,

`‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ü‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏™‡∏¥‡πà‡∏á‡∏î‡∏µ ‡πÜ ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå‡∏°‡∏≤‡∏™
‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÅ‡∏ü‡∏ô‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏π‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÅ‡∏ü‡∏ô‡πÄ‡∏•‡∏¢ üí´
‡∏£‡∏±‡∏Å‡πÅ‡∏ü‡∏ô‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡∏ô‡∏∞ üéÑüíñ`,

`‡∏ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏´‡∏ô‡∏≤‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ü‡∏ô‡∏à‡∏≥‡πÑ‡∏ß‡πâ‡∏ô‡∏∞
‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡∏π ‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡πà‡∏ô ‡πÜ ‡∏£‡∏≠‡πÅ‡∏ü‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏•‡∏¢ ü§ç‚ùÑÔ∏è
‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå‡∏°‡∏≤‡∏™‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏Ñ‡∏ô‡πÄ‡∏Å‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡∏π üéÑ‚ú®`
];

let lastIndex = -1;
let typingTimer = null;

function typeText(text){
  if (typingTimer) clearInterval(typingTimer);
  msgEl.innerHTML = '';
  const chars = Array.from(text);
  let i = 0;
  typingTimer = setInterval(()=>{
    if(i>=chars.length){ clearInterval(typingTimer); return; }
    msgEl.innerHTML += chars[i++];
  },40);
}

function getRandomMessage(){
  let i;
  do{ i=Math.floor(Math.random()*messages.length); }
  while(i===lastIndex && messages.length>1);
  lastIndex=i;
  return messages[i];
}

/* EVENTS */
card.onclick = () => {
  const isOpen = card.classList.contains('is-flipped');

  if (!isOpen) {
    // ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î
    card.classList.add('is-flipped');
    typeText(getRandomMessage());

    music.volume = 0.4;
    music.play();
  } else {
    // ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î
    card.classList.remove('is-flipped');

    if (typingTimer) clearInterval(typingTimer);
  }
};

retype.onclick=e=>{
  e.stopPropagation();
  typeText(getRandomMessage());
};

party.onclick = e => {
  e.stopPropagation();
  snow(20);
};

function snow(count = 12){
  for(let i=0;i<count;i++){
    const s = document.createElement('div');
    s.className = 'snow';

    s.style.left = Math.random()*100 + 'vw';
    s.style.animationDuration = 5 + Math.random()*6 + 's';
    s.style.opacity = Math.random()*0.6 + 0.4;
    s.style.transform = `translateX(${Math.random()*40-20}px)`;

    document.body.appendChild(s);
    setTimeout(()=>s.remove(),12000);
  }
}

setInterval(()=>{
  snow(3);
},1200);

// ‡∏´‡∏¥‡∏°‡∏∞‡∏ï‡∏Å‡πÄ‡∏ö‡∏≤ ‡πÜ ‡∏ï‡∏•‡∏≠‡∏î
setInterval(()=>snow(3),1200);

setInterval(()=>{
  if(music.paused) return;

  const n = document.createElement('div');
  n.className = 'music-note';
  n.textContent = ['üéµ','üé∂','‚ô™'][Math.random()*3|0];
  n.style.left = Math.random()*100 + '%';
  n.style.animationDuration = 7 + Math.random()*5 + 's';
  document.body.appendChild(n);

  setTimeout(()=>n.remove(),15000);
},1000);
function animateLight(){
  analyser.getByteFrequencyData(dataArray);
  const avg = dataArray.reduce((a,b)=>a+b,0)/bufferLength;
  musicLight.style.opacity = 0.25 + Math.min(1,avg/120)*0.7;
  if(!music.paused) requestAnimationFrame(animateLight);
}

</script>
</body>
</html>
